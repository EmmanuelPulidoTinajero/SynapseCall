<div>
  <div id="video-grid"></div>
</div>
<div id="space"></div>
<div>
  <form action="/meetings/{{meetingId}}/uploadFiles" method="post" enctype="multipart/form-data">
    <div>
      <input type="file" name="file">
    </div>
    <div>
      <button type="submit">Upload</button>
    </div>
  </form>
</div>
<div id="file-grid">
</div>

<script>
  const MEETING_ID = "{{meetingId}}";
    const keys = {{{downloadLinksJson}}};
    const filesGrid = document.getElementById("file-grid");

    if (Array.isArray(keys) && keys.length > 0) {
      keys.forEach((item, i) => {
        const url = item.url;
        const key = item.key || '';
        const parts = key.split('---');
        const filename = parts.length > 0 ? parts[parts.length - 1] : `File ${i + 1}`;

        const a = document.createElement('a');
        a.href = url || '#';
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.textContent = filename;

        const btn = document.createElement('button');
        btn.textContent = 'Download';
        btn.type = 'button';
        btn.addEventListener('click', () => {
          if (url) window.open(url, '_blank');
        });

        const div = document.createElement('div');
        div.appendChild(a);
        div.appendChild(document.createTextNode(' '));
        div.appendChild(btn);
        filesGrid.appendChild(div);
      });
    } else {
      filesGrid.innerText = 'No files uploaded yet.';
    }
</script>